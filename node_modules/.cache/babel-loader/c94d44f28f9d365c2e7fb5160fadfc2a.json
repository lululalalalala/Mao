{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\nvar _echarts = require(\"echarts\");\n\nvar zrUtil = _echarts.util;\nvar graphic = _echarts.graphic;\nvar matrix = _echarts.matrix;\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global BMap */\n\nfunction BMapCoordSys(bmap, api) {\n  this._bmap = bmap;\n  this.dimensions = ['lng', 'lat'];\n  this._mapOffset = [0, 0];\n  this._api = api;\n  this._projection = new BMap.MercatorProjection();\n}\n\nBMapCoordSys.prototype.dimensions = ['lng', 'lat'];\n\nBMapCoordSys.prototype.setZoom = function (zoom) {\n  this._zoom = zoom;\n};\n\nBMapCoordSys.prototype.setCenter = function (center) {\n  this._center = this._projection.lngLatToPoint(new BMap.Point(center[0], center[1]));\n};\n\nBMapCoordSys.prototype.setMapOffset = function (mapOffset) {\n  this._mapOffset = mapOffset;\n};\n\nBMapCoordSys.prototype.getBMap = function () {\n  return this._bmap;\n};\n\nBMapCoordSys.prototype.dataToPoint = function (data) {\n  var point = new BMap.Point(data[0], data[1]); // TODO mercator projection is toooooooo slow\n  // var mercatorPoint = this._projection.lngLatToPoint(point);\n  // var width = this._api.getZr().getWidth();\n  // var height = this._api.getZr().getHeight();\n  // var divider = Math.pow(2, 18 - 10);\n  // return [\n  //     Math.round((mercatorPoint.x - this._center.x) / divider + width / 2),\n  //     Math.round((this._center.y - mercatorPoint.y) / divider + height / 2)\n  // ];\n\n  var px = this._bmap.pointToOverlayPixel(point);\n\n  var mapOffset = this._mapOffset;\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\n};\n\nBMapCoordSys.prototype.pointToData = function (pt) {\n  var mapOffset = this._mapOffset;\n\n  var pt = this._bmap.overlayPixelToPoint({\n    x: pt[0] + mapOffset[0],\n    y: pt[1] + mapOffset[1]\n  });\n\n  return [pt.lng, pt.lat];\n};\n\nBMapCoordSys.prototype.getViewRect = function () {\n  var api = this._api;\n  return new graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\n};\n\nBMapCoordSys.prototype.getRoamTransform = function () {\n  return matrix.create();\n};\n\nBMapCoordSys.prototype.prepareCustoms = function (data) {\n  var rect = this.getViewRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'bmap',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(this.dataToPoint, this),\n      size: zrUtil.bind(dataToCoordSize, this)\n    }\n  };\n};\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nvar Overlay; // For deciding which dimensions to use when creating list data\n\nBMapCoordSys.dimensions = BMapCoordSys.prototype.dimensions;\n\nfunction createOverlayCtor() {\n  function Overlay(root) {\n    this._root = root;\n  }\n\n  Overlay.prototype = new BMap.Overlay();\n  /**\n   * 初始化\n   *\n   * @param {BMap.Map} map\n   * @override\n   */\n\n  Overlay.prototype.initialize = function (map) {\n    map.getPanes().labelPane.appendChild(this._root);\n    return this._root;\n  };\n  /**\n   * @override\n   */\n\n\n  Overlay.prototype.draw = function () {};\n\n  return Overlay;\n}\n\nBMapCoordSys.create = function (ecModel, api) {\n  var bmapCoordSys;\n  var root = api.getDom(); // TODO Dispose\n\n  ecModel.eachComponent('bmap', function (bmapModel) {\n    var painter = api.getZr().painter;\n    var viewportRoot = painter.getViewportRoot();\n\n    if (typeof BMap === 'undefined') {\n      throw new Error('BMap api is not loaded');\n    }\n\n    Overlay = Overlay || createOverlayCtor();\n\n    if (bmapCoordSys) {\n      throw new Error('Only one bmap component can exist');\n    }\n\n    if (!bmapModel.__bmap) {\n      // Not support IE8\n      var bmapRoot = root.querySelector('.ec-extension-bmap');\n\n      if (bmapRoot) {\n        // Reset viewport left and top, which will be changed\n        // in moving handler in BMapView\n        viewportRoot.style.left = '0px';\n        viewportRoot.style.top = '0px';\n        root.removeChild(bmapRoot);\n      }\n\n      bmapRoot = document.createElement('div');\n      bmapRoot.style.cssText = 'width:100%;height:100%'; // Not support IE8\n\n      bmapRoot.classList.add('ec-extension-bmap');\n      root.appendChild(bmapRoot); // initialize bmap\n\n      var mapOptions = bmapModel.get('mapOptions') || {}; // Not support `mapType`, use `bmap.setMapType(MapType)` instead.\n\n      delete mapOptions.mapType;\n      var bmap = bmapModel.__bmap = new BMap.Map(bmapRoot, mapOptions);\n      var overlay = new Overlay(viewportRoot);\n      bmap.addOverlay(overlay); // Override\n\n      painter.getViewportRootOffset = function () {\n        return {\n          offsetLeft: 0,\n          offsetTop: 0\n        };\n      };\n    }\n\n    var bmap = bmapModel.__bmap; // Set bmap options\n    // centerAndZoom before layout and render\n\n    var center = bmapModel.get('center');\n    var zoom = bmapModel.get('zoom');\n\n    if (center && zoom) {\n      var bmapCenter = bmap.getCenter();\n      var bmapZoom = bmap.getZoom();\n      var centerOrZoomChanged = bmapModel.centerOrZoomChanged([bmapCenter.lng, bmapCenter.lat], bmapZoom);\n\n      if (centerOrZoomChanged) {\n        var pt = new BMap.Point(center[0], center[1]);\n        bmap.centerAndZoom(pt, zoom);\n      }\n    }\n\n    bmapCoordSys = new BMapCoordSys(bmap, api);\n    bmapCoordSys.setMapOffset(bmapModel.__mapOffset || [0, 0]);\n    bmapCoordSys.setZoom(zoom);\n    bmapCoordSys.setCenter(center);\n    bmapModel.coordinateSystem = bmapCoordSys;\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'bmap') {\n      seriesModel.coordinateSystem = bmapCoordSys;\n    }\n  });\n};\n\nvar _default = BMapCoordSys;\nmodule.exports = _default;","map":{"version":3,"names":["_echarts","require","zrUtil","util","graphic","matrix","BMapCoordSys","bmap","api","_bmap","dimensions","_mapOffset","_api","_projection","BMap","MercatorProjection","prototype","setZoom","zoom","_zoom","setCenter","center","_center","lngLatToPoint","Point","setMapOffset","mapOffset","getBMap","dataToPoint","data","point","px","pointToOverlayPixel","x","y","pointToData","pt","overlayPixelToPoint","lng","lat","getViewRect","BoundingRect","getWidth","getHeight","getRoamTransform","create","prepareCustoms","rect","coordSys","type","width","height","coord","bind","size","dataToCoordSize","dataSize","dataItem","map","dimIdx","val","halfSize","p1","p2","Math","abs","Overlay","createOverlayCtor","root","_root","initialize","getPanes","labelPane","appendChild","draw","ecModel","bmapCoordSys","getDom","eachComponent","bmapModel","painter","getZr","viewportRoot","getViewportRoot","Error","__bmap","bmapRoot","querySelector","style","left","top","removeChild","document","createElement","cssText","classList","add","mapOptions","get","mapType","Map","overlay","addOverlay","getViewportRootOffset","offsetLeft","offsetTop","bmapCenter","getCenter","bmapZoom","getZoom","centerOrZoomChanged","centerAndZoom","__mapOffset","coordinateSystem","eachSeries","seriesModel","_default","module","exports"],"sources":["D:/vue/Mao/node_modules/echarts/extension/bmap/BMapCoordSys.js"],"sourcesContent":["\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\nvar _echarts = require(\"echarts\");\n\nvar zrUtil = _echarts.util;\nvar graphic = _echarts.graphic;\nvar matrix = _echarts.matrix;\n\n/*\n* Licensed to the Apache Software Foundation (ASF) under one\n* or more contributor license agreements.  See the NOTICE file\n* distributed with this work for additional information\n* regarding copyright ownership.  The ASF licenses this file\n* to you under the Apache License, Version 2.0 (the\n* \"License\"); you may not use this file except in compliance\n* with the License.  You may obtain a copy of the License at\n*\n*   http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing,\n* software distributed under the License is distributed on an\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n* KIND, either express or implied.  See the License for the\n* specific language governing permissions and limitations\n* under the License.\n*/\n\n/* global BMap */\nfunction BMapCoordSys(bmap, api) {\n  this._bmap = bmap;\n  this.dimensions = ['lng', 'lat'];\n  this._mapOffset = [0, 0];\n  this._api = api;\n  this._projection = new BMap.MercatorProjection();\n}\n\nBMapCoordSys.prototype.dimensions = ['lng', 'lat'];\n\nBMapCoordSys.prototype.setZoom = function (zoom) {\n  this._zoom = zoom;\n};\n\nBMapCoordSys.prototype.setCenter = function (center) {\n  this._center = this._projection.lngLatToPoint(new BMap.Point(center[0], center[1]));\n};\n\nBMapCoordSys.prototype.setMapOffset = function (mapOffset) {\n  this._mapOffset = mapOffset;\n};\n\nBMapCoordSys.prototype.getBMap = function () {\n  return this._bmap;\n};\n\nBMapCoordSys.prototype.dataToPoint = function (data) {\n  var point = new BMap.Point(data[0], data[1]); // TODO mercator projection is toooooooo slow\n  // var mercatorPoint = this._projection.lngLatToPoint(point);\n  // var width = this._api.getZr().getWidth();\n  // var height = this._api.getZr().getHeight();\n  // var divider = Math.pow(2, 18 - 10);\n  // return [\n  //     Math.round((mercatorPoint.x - this._center.x) / divider + width / 2),\n  //     Math.round((this._center.y - mercatorPoint.y) / divider + height / 2)\n  // ];\n\n  var px = this._bmap.pointToOverlayPixel(point);\n\n  var mapOffset = this._mapOffset;\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\n};\n\nBMapCoordSys.prototype.pointToData = function (pt) {\n  var mapOffset = this._mapOffset;\n\n  var pt = this._bmap.overlayPixelToPoint({\n    x: pt[0] + mapOffset[0],\n    y: pt[1] + mapOffset[1]\n  });\n\n  return [pt.lng, pt.lat];\n};\n\nBMapCoordSys.prototype.getViewRect = function () {\n  var api = this._api;\n  return new graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\n};\n\nBMapCoordSys.prototype.getRoamTransform = function () {\n  return matrix.create();\n};\n\nBMapCoordSys.prototype.prepareCustoms = function (data) {\n  var rect = this.getViewRect();\n  return {\n    coordSys: {\n      // The name exposed to user is always 'cartesian2d' but not 'grid'.\n      type: 'bmap',\n      x: rect.x,\n      y: rect.y,\n      width: rect.width,\n      height: rect.height\n    },\n    api: {\n      coord: zrUtil.bind(this.dataToPoint, this),\n      size: zrUtil.bind(dataToCoordSize, this)\n    }\n  };\n};\n\nfunction dataToCoordSize(dataSize, dataItem) {\n  dataItem = dataItem || [0, 0];\n  return zrUtil.map([0, 1], function (dimIdx) {\n    var val = dataItem[dimIdx];\n    var halfSize = dataSize[dimIdx] / 2;\n    var p1 = [];\n    var p2 = [];\n    p1[dimIdx] = val - halfSize;\n    p2[dimIdx] = val + halfSize;\n    p1[1 - dimIdx] = p2[1 - dimIdx] = dataItem[1 - dimIdx];\n    return Math.abs(this.dataToPoint(p1)[dimIdx] - this.dataToPoint(p2)[dimIdx]);\n  }, this);\n}\n\nvar Overlay; // For deciding which dimensions to use when creating list data\n\nBMapCoordSys.dimensions = BMapCoordSys.prototype.dimensions;\n\nfunction createOverlayCtor() {\n  function Overlay(root) {\n    this._root = root;\n  }\n\n  Overlay.prototype = new BMap.Overlay();\n  /**\n   * 初始化\n   *\n   * @param {BMap.Map} map\n   * @override\n   */\n\n  Overlay.prototype.initialize = function (map) {\n    map.getPanes().labelPane.appendChild(this._root);\n    return this._root;\n  };\n  /**\n   * @override\n   */\n\n\n  Overlay.prototype.draw = function () {};\n\n  return Overlay;\n}\n\nBMapCoordSys.create = function (ecModel, api) {\n  var bmapCoordSys;\n  var root = api.getDom(); // TODO Dispose\n\n  ecModel.eachComponent('bmap', function (bmapModel) {\n    var painter = api.getZr().painter;\n    var viewportRoot = painter.getViewportRoot();\n\n    if (typeof BMap === 'undefined') {\n      throw new Error('BMap api is not loaded');\n    }\n\n    Overlay = Overlay || createOverlayCtor();\n\n    if (bmapCoordSys) {\n      throw new Error('Only one bmap component can exist');\n    }\n\n    if (!bmapModel.__bmap) {\n      // Not support IE8\n      var bmapRoot = root.querySelector('.ec-extension-bmap');\n\n      if (bmapRoot) {\n        // Reset viewport left and top, which will be changed\n        // in moving handler in BMapView\n        viewportRoot.style.left = '0px';\n        viewportRoot.style.top = '0px';\n        root.removeChild(bmapRoot);\n      }\n\n      bmapRoot = document.createElement('div');\n      bmapRoot.style.cssText = 'width:100%;height:100%'; // Not support IE8\n\n      bmapRoot.classList.add('ec-extension-bmap');\n      root.appendChild(bmapRoot); // initialize bmap\n\n      var mapOptions = bmapModel.get('mapOptions') || {}; // Not support `mapType`, use `bmap.setMapType(MapType)` instead.\n\n      delete mapOptions.mapType;\n      var bmap = bmapModel.__bmap = new BMap.Map(bmapRoot, mapOptions);\n      var overlay = new Overlay(viewportRoot);\n      bmap.addOverlay(overlay); // Override\n\n      painter.getViewportRootOffset = function () {\n        return {\n          offsetLeft: 0,\n          offsetTop: 0\n        };\n      };\n    }\n\n    var bmap = bmapModel.__bmap; // Set bmap options\n    // centerAndZoom before layout and render\n\n    var center = bmapModel.get('center');\n    var zoom = bmapModel.get('zoom');\n\n    if (center && zoom) {\n      var bmapCenter = bmap.getCenter();\n      var bmapZoom = bmap.getZoom();\n      var centerOrZoomChanged = bmapModel.centerOrZoomChanged([bmapCenter.lng, bmapCenter.lat], bmapZoom);\n\n      if (centerOrZoomChanged) {\n        var pt = new BMap.Point(center[0], center[1]);\n        bmap.centerAndZoom(pt, zoom);\n      }\n    }\n\n    bmapCoordSys = new BMapCoordSys(bmap, api);\n    bmapCoordSys.setMapOffset(bmapModel.__mapOffset || [0, 0]);\n    bmapCoordSys.setZoom(zoom);\n    bmapCoordSys.setCenter(center);\n    bmapModel.coordinateSystem = bmapCoordSys;\n  });\n  ecModel.eachSeries(function (seriesModel) {\n    if (seriesModel.get('coordinateSystem') === 'bmap') {\n      seriesModel.coordinateSystem = bmapCoordSys;\n    }\n  });\n};\n\nvar _default = BMapCoordSys;\nmodule.exports = _default;"],"mappings":"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"},"metadata":{},"sourceType":"script"}