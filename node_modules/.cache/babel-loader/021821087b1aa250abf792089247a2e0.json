{"ast":null,"code":"require(\"core-js/modules/es.error.cause.js\");\n\n!function (t, e) {\n  \"object\" == typeof exports && \"object\" == typeof module ? module.exports = e(require(\"echarts\")) : \"function\" == typeof define && define.amd ? define([\"echarts\"], e) : \"object\" == typeof exports ? exports.amap = e(require(\"echarts\")) : (t.echarts = t.echarts || {}, t.echarts.amap = e(t.echarts));\n}(this, function (t) {\n  return function (t) {\n    function e(n) {\n      if (o[n]) return o[n].exports;\n      var a = o[n] = {\n        i: n,\n        l: !1,\n        exports: {}\n      };\n      return t[n].call(a.exports, a, a.exports, e), a.l = !0, a.exports;\n    }\n\n    var o = {};\n    return e.m = t, e.c = o, e.i = function (t) {\n      return t;\n    }, e.d = function (t, o, n) {\n      e.o(t, o) || Object.defineProperty(t, o, {\n        configurable: !1,\n        enumerable: !0,\n        get: n\n      });\n    }, e.n = function (t) {\n      var o = t && t.__esModule ? function () {\n        return t.default;\n      } : function () {\n        return t;\n      };\n      return e.d(o, \"a\", o), o;\n    }, e.o = function (t, e) {\n      return Object.prototype.hasOwnProperty.call(t, e);\n    }, e.p = \"\", e(e.s = 4);\n  }([function (e, o) {\n    e.exports = t;\n  }, function (t, e, o) {\n    function n(t, e) {\n      this._amap = t, this.dimensions = [\"lng\", \"lat\"], this._mapOffset = [0, 0], this._api = e;\n    }\n\n    var a = o(0);\n    n.prototype.dimensions = [\"lng\", \"lat\"], n.prototype.setZoom = function (t) {\n      this._zoom = t;\n    }, n.prototype.setCenter = function (t) {\n      this._center = this._amap.lnglatToPixel(t);\n    }, n.prototype.setMapOffset = function (t) {\n      this._mapOffset = t;\n    }, n.prototype.getAMap = function () {\n      return this._amap;\n    }, n.prototype.dataToPoint = function (t) {\n      var e = new AMap.LngLat(t[0], t[1]),\n          o = this._amap.lngLatToContainer(e),\n          n = this._mapOffset;\n\n      return [o.x - n[0], o.y - n[1]];\n    }, n.prototype.pointToData = function (t) {\n      var e = this._mapOffset,\n          t = this._amap.containerToLngLat({\n        x: t[0] + e[0],\n        y: t[1] + e[1]\n      });\n\n      return [t.lng, t.lat];\n    }, n.prototype.getViewRect = function () {\n      var t = this._api;\n      return new a.graphic.BoundingRect(0, 0, t.getWidth(), t.getHeight());\n    }, n.prototype.getRoamTransform = function () {\n      return a.matrix.create();\n    };\n    n.dimensions = n.prototype.dimensions, n.create = function (t, e) {\n      var o,\n          r = e.getDom();\n      t.eachComponent(\"amap\", function (t) {\n        var i = e.getZr().painter.getViewportRoot();\n        if (\"undefined\" == typeof AMap) throw new Error(\"AMap api is not loaded\");\n        if (o) throw new Error(\"Only one amap component can exist\");\n\n        if (!t.__amap) {\n          var p = r.querySelector(\".ec-extension-amap\");\n          p && (i.style.left = \"0px\", i.style.top = \"0px\", r.removeChild(p)), p = document.createElement(\"div\"), p.style.cssText = \"width:100%;height:100%\", p.classList.add(\"ec-extension-amap\"), r.appendChild(p);\n          var s = t.get() || {};\n          s = t.__options = a.util.clone(s);\n          var c = t.__amap = new AMap.Map(p, s),\n              f = t.__layer = new AMap.CustomLayer(i);\n          f.setMap(c);\n        }\n\n        var c = t.getAMap(),\n            f = t.getLayer();\n        f.hide();\n        var m = c.getZoom(),\n            u = c.getCenter();\n        o = new n(c, e), o.setMapOffset(t.__mapOffset || [0, 0]), o.setZoom(m), o.setCenter([u.lng, u.lat]), t.coordinateSystem = o, f.show();\n      }), t.eachSeries(function (t) {\n        \"amap\" === t.get(\"coordinateSystem\") && (t.coordinateSystem = o);\n      });\n    }, t.exports = n;\n  }, function (t, e, o) {\n    function n(t, e) {\n      return t && e && t[0] === e[0] && t[1] === e[1];\n    }\n\n    t.exports = o(0).extendComponentModel({\n      type: \"amap\",\n      getAMap: function () {\n        return this.__amap;\n      },\n      getLayer: function () {\n        return this.__layer;\n      },\n      getMapOptions: function () {\n        return this.__options;\n      },\n      setCenterAndZoom: function (t, e) {\n        this.option.center = t, this.option.zoom = e;\n      },\n      centerOrZoomChanged: function (t, e) {\n        var o = this.option;\n        return !(n(t, o.center) && e === o.zoom);\n      },\n      defaultOption: {\n        center: [116.397475, 39.908695],\n        zoom: 4\n      }\n    });\n  }, function (t, e, o) {\n    function n(t, e, o) {\n      var n, a, r, i;\n      return i = function () {\n        n = !1, a && (r.apply(o, a), a = !1);\n      }, r = function () {\n        n ? a = arguments : (t.apply(o, arguments), setTimeout(i, e), n = !0);\n      };\n    }\n\n    var a = o(0);\n    t.exports = o(0).extendComponentView({\n      type: \"amap\",\n      render: function (t, e, o) {\n        function r() {\n          p || o.dispatchAction({\n            type: \"amapRoam\"\n          });\n        }\n\n        function i(t) {\n          a.getInstanceByDom(o.getDom()).resize(), m.call(this, t);\n        }\n\n        var p = !0,\n            s = t.getAMap(),\n            c = o.getZr().painter.getViewportRoot(),\n            f = t.coordinateSystem,\n            m = function (e) {\n          if (!p) {\n            var n = c.parentNode.parentNode.parentNode,\n                a = [-parseInt(n.style.left, 10) || 0, -parseInt(n.style.top, 10) || 0];\n            c.style.left = a[0] + \"px\", c.style.top = a[1] + \"px\", f.setMapOffset(a), t.__mapOffset = a, o.dispatchAction({\n              type: \"amapRoam\"\n            });\n          }\n        },\n            u = n(i, 300, s);\n\n        s.off(\"movestart\", this._oldMoveHandler), s.off(\"zoomend\", this._oldZoomEndHandler), s.off(\"moveend\", this._oldZoomEndHandler), s.off(\"complete\", this._oldZoomEndHandler), t.get(\"resizeEnable\") && s.off(\"resize\", this._oldResizeHandler), s.on(\"movestart\", m), s.on(\"zoomend\", r), s.on(\"moveend\", r), s.on(\"complete\", r), t.get(\"resizeEnable\") && s.on(\"resize\", u), this._oldMoveHandler = m, this._oldZoomEndHandler = r, this._oldResizeHandler = u, p = !1;\n      }\n    });\n  }, function (t, e, o) {\n    o(0).registerCoordinateSystem(\"amap\", o(1)), o(2), o(3), o(0).registerAction({\n      type: \"amapRoam\",\n      event: \"amapRoam\",\n      update: \"updateLayout\"\n    }, function (t, e) {\n      e.eachComponent(\"amap\", function (t) {\n        var e = t.getAMap(),\n            o = e.getCenter();\n        t.setCenterAndZoom([o.lng, o.lat], e.getZoom());\n      });\n    }), t.exports = {\n      version: \"1.0.0-rc.6\"\n    };\n  }]);\n});","map":{"version":3,"mappings":"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","names":["module","define","exports","root","this","modules","i","moduleId","l","__webpack_require__","value","Object","configurable","name","enumerable","get","getter","property","__WEBPACK_EXTERNAL_MODULE_0__","AMapCoordSys","zoom","center","mapOffset","_amap","px","pt","x","containerToLngLat","y","lat","getHeight","ecModel","amapRoot","viewportRoot","options","layer","amapCoordSys","amapModel","show","seriesModel","type","extendComponentModel","getAMap","__amap","getLayer","__layer","getMapOptions","__options","setCenterAndZoom","centerOrZoomChanged","defaultOption","later","lock","args","wrapperFn","fn","setTimeout","extendComponentView","render","rendering","api","dispatchAction","echarts","moveHandler","amap","coordSys","parseInt","aMapModel","throttledResizeHandler","registerAction","event","update","getZoom","version"],"sourceRoot":"","sources":["webpack:///webpack/universalModuleDefinition","webpack:///echarts-amap.min.js","webpack:///webpack/bootstrap 7c74ff067bc57990e890","webpack:///external \"echarts\"","webpack:///src/AMapCoordSys.js","webpack:///src/AMapModel.js","webpack:///src/AMapView.js","webpack:///src/amap.js"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"amap\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"echarts\"] = root[\"echarts\"] || {}, root[\"echarts\"][\"amap\"] = factory(root[\"echarts\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"echarts\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"echarts\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"amap\"] = factory(require(\"echarts\"));\n\telse\n\t\troot[\"echarts\"] = root[\"echarts\"] || {}, root[\"echarts\"][\"amap\"] = factory(root[\"echarts\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar echarts = __webpack_require__(0);\r\n\r\nfunction AMapCoordSys(amap, api) {\r\n  this._amap = amap;\r\n  this.dimensions = ['lng', 'lat'];\r\n  this._mapOffset = [0, 0];\r\n\r\n  this._api = api;\r\n}\r\n\r\nAMapCoordSys.prototype.dimensions = ['lng', 'lat'];\r\n\r\nAMapCoordSys.prototype.setZoom = function (zoom) {\r\n  this._zoom = zoom;\r\n};\r\n\r\nAMapCoordSys.prototype.setCenter = function (center) {\r\n  this._center = this._amap.lnglatToPixel(center);//, 10)\r\n};\r\n\r\nAMapCoordSys.prototype.setMapOffset = function (mapOffset) {\r\n  this._mapOffset = mapOffset;\r\n};\r\n\r\nAMapCoordSys.prototype.getAMap = function () {\r\n  return this._amap;\r\n};\r\n\r\nAMapCoordSys.prototype.dataToPoint = function (data) {\r\n  var point = new AMap.LngLat(data[0], data[1]);\r\n  var px = this._amap.lngLatToContainer(point);//, this._zoom);\r\n  var mapOffset = this._mapOffset;\r\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\r\n};\r\n\r\nAMapCoordSys.prototype.pointToData = function (pt) {\r\n  var mapOffset = this._mapOffset;\r\n  var pt = this._amap.containerToLngLat({\r\n    x: pt[0] + mapOffset[0],\r\n    y: pt[1] + mapOffset[1]\r\n  });\r\n  return [pt.lng, pt.lat];\r\n};\r\n\r\nAMapCoordSys.prototype.getViewRect = function () {\r\n  var api = this._api;\r\n  return new echarts.graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\r\n};\r\n\r\nAMapCoordSys.prototype.getRoamTransform = function () {\r\n  return echarts.matrix.create();\r\n};\r\n\r\nvar Overlay;\r\n\r\n// For deciding which dimensions to use when creating list data\r\nAMapCoordSys.dimensions = AMapCoordSys.prototype.dimensions;\r\n\r\nAMapCoordSys.create = function (ecModel, api) {\r\n  var amapCoordSys;\r\n  var root = api.getDom();\r\n\r\n  // TODO Dispose\r\n  ecModel.eachComponent('amap', function (amapModel) {\r\n    var viewportRoot = api.getZr().painter.getViewportRoot();\r\n    if (typeof AMap === 'undefined') {\r\n      throw new Error('AMap api is not loaded');\r\n    }\r\n\r\n    if (amapCoordSys) {\r\n      throw new Error('Only one amap component can exist');\r\n    }\r\n    if (!amapModel.__amap) {\r\n      // Not support IE8\r\n      var amapRoot = root.querySelector('.ec-extension-amap');\r\n      if (amapRoot) {\r\n          // Reset viewport left and top, which will be changed\r\n          // in moving handler in AMapView\r\n          viewportRoot.style.left = '0px';\r\n          viewportRoot.style.top = '0px';\r\n          root.removeChild(amapRoot);\r\n      }\r\n      amapRoot = document.createElement('div');\r\n      amapRoot.style.cssText = 'width:100%;height:100%';\r\n      // Not support IE8\r\n      amapRoot.classList.add('ec-extension-amap');\r\n      root.appendChild(amapRoot);\r\n\r\n      var options = amapModel.get() || {};\r\n      options = amapModel.__options = echarts.util.clone(options);\r\n      var amap = amapModel.__amap = new AMap.Map(amapRoot, options);\r\n\r\n      var layer = amapModel.__layer = new AMap.CustomLayer(viewportRoot);\r\n      layer.setMap(amap);\r\n    }\r\n    var amap = amapModel.getAMap();\r\n    var layer = amapModel.getLayer();\r\n    layer.hide();\r\n\r\n    var zoom = amap.getZoom();\r\n    var center = amap.getCenter();\r\n\r\n    amapCoordSys = new AMapCoordSys(amap, api);\r\n    amapCoordSys.setMapOffset(amapModel.__mapOffset || [0, 0]);\r\n    amapCoordSys.setZoom(zoom);\r\n    amapCoordSys.setCenter([center.lng, center.lat]);\r\n\r\n    amapModel.coordinateSystem = amapCoordSys;\n    layer.show();\r\n  });\r\n\r\n  ecModel.eachSeries(function (seriesModel) {\r\n    if (seriesModel.get('coordinateSystem') === 'amap') {\r\n      seriesModel.coordinateSystem = amapCoordSys;\r\n    }\r\n  });\r\n};\r\n\r\nmodule.exports = AMapCoordSys;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction v2Equal(a, b) {\r\n  return a && b && a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\nmodule.exports = __webpack_require__(0).extendComponentModel({\r\n  type: 'amap',\r\n\r\n  getAMap: function () {\r\n    // __amap is injected when creating AMapCoordSys\r\n    return this.__amap;\r\n  },\r\n\r\n  getLayer: function() {\r\n    // __layer is injected when creating AMapCoordSys\r\n    return this.__layer;\r\n  },\r\n\r\n  getMapOptions: function() {\r\n    return this.__options;\r\n  },\r\n\r\n  setCenterAndZoom: function (center, zoom) {\r\n    this.option.center = center;\r\n    this.option.zoom = zoom;\r\n  },\r\n\r\n  centerOrZoomChanged: function (center, zoom) {\r\n    var option = this.option;\r\n    return !(v2Equal(center, option.center) && zoom === option.zoom);\r\n  },\r\n\r\n  defaultOption: {\r\n    center: [116.397475,39.908695],\r\n    zoom: 4,\r\n  }\r\n});\r\n\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/*\r\n * this function bollowed from:\r\n * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\r\n */\r\nfunction throttle(fn, time, context) {\r\n\tvar lock, args, wrapperFn, later;\r\n\r\n\tlater = function () {\r\n\t\t// reset lock and call if queued\r\n\t\tlock = false;\r\n\t\tif (args) {\r\n\t\t\twrapperFn.apply(context, args);\r\n\t\t\targs = false;\r\n\t\t}\r\n\t};\r\n\r\n\twrapperFn = function () {\r\n\t\tif (lock) {\r\n\t\t\t// called too soon, queue to call later\r\n\t\t\targs = arguments;\r\n\r\n\t\t} else {\r\n\t\t\t// call and lock until later\r\n\t\t\tfn.apply(context, arguments);\r\n\t\t\tsetTimeout(later, time);\r\n\t\t\tlock = true;\r\n\t\t}\r\n\t};\r\n\r\n\treturn wrapperFn;\r\n}\r\n\r\nvar echarts = __webpack_require__(0);\r\n\r\nmodule.exports = __webpack_require__(0).extendComponentView({\r\n  type: 'amap',\r\n\r\n  render: function (aMapModel, ecModel, api) {\r\n    var rendering = true;\r\n\r\n    var amap = aMapModel.getAMap();\r\n    var viewportRoot = api.getZr().painter.getViewportRoot();\r\n    var coordSys = aMapModel.coordinateSystem;\r\n    var moveHandler = function (e) {\r\n      if (rendering) {\r\n          return;\r\n      }\r\n      var offsetEl = viewportRoot.parentNode.parentNode.parentNode;\r\n      var mapOffset = [\r\n          -parseInt(offsetEl.style.left, 10) || 0,\r\n          -parseInt(offsetEl.style.top, 10) || 0\r\n      ];\r\n      viewportRoot.style.left = mapOffset[0] + 'px';\r\n      viewportRoot.style.top = mapOffset[1] + 'px';\r\n\r\n      coordSys.setMapOffset(mapOffset);\r\n      aMapModel.__mapOffset = mapOffset;\r\n\r\n      api.dispatchAction({\r\n          type: 'amapRoam'\r\n      });\r\n    };\r\n\r\n    function zoomEndHandler() {\r\n      if (rendering) {\r\n          return;\r\n      }\r\n      api.dispatchAction({\r\n          type: 'amapRoam'\r\n      });\r\n    }\r\n\r\n    function resizeHandler(e) {\r\n      echarts.getInstanceByDom(api.getDom()).resize();\r\n      moveHandler.call(this, e)\r\n    }\r\n\r\n    var throttledResizeHandler = throttle(resizeHandler, 300, amap);\r\n\r\n    amap.off('movestart', this._oldMoveHandler);\r\n    amap.off('zoomend', this._oldZoomEndHandler);\r\n    amap.off('moveend', this._oldZoomEndHandler);\r\n    amap.off('complete', this._oldZoomEndHandler);\r\n    aMapModel.get('resizeEnable') && amap.off('resize', this._oldResizeHandler);\r\n\r\n    amap.on('movestart', moveHandler);\r\n    amap.on('zoomend', zoomEndHandler);\r\n    amap.on('moveend', zoomEndHandler);\r\n    amap.on('complete', zoomEndHandler);\r\n    aMapModel.get('resizeEnable') && amap.on('resize', throttledResizeHandler);\r\n\r\n    this._oldMoveHandler = moveHandler;\r\n    this._oldZoomEndHandler = zoomEndHandler;\r\n    this._oldResizeHandler = throttledResizeHandler;\r\n\r\n    // var roam = aMapModel.get('roam');\r\n    // if (roam && roam !== 'scale') {\r\n    //     amap.enableDragging();\r\n    // }\r\n    // else {\r\n    //     amap.disableDragging();\r\n    // }\r\n    // if (roam && roam !== 'move') {\r\n    //     amap.enableScrollWheelZoom();\r\n    //     amap.enableDoubleClickZoom();\r\n    //     amap.enablePinchToZoom();\r\n    // }\r\n    // else {\r\n    //     amap.disableScrollWheelZoom();\r\n    //     amap.disableDoubleClickZoom();\r\n    //     amap.disablePinchToZoom();\r\n    // }\r\n\r\n    rendering = false;\r\n  }\r\n});\r\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\r\n * BMap component extension\r\n */\r\n__webpack_require__(0).registerCoordinateSystem(\r\n  'amap', __webpack_require__(1)\r\n);\r\n__webpack_require__(2);\r\n__webpack_require__(3);\r\n\r\n// Action\r\n__webpack_require__(0).registerAction({\r\n  type: 'amapRoam',\r\n  event: 'amapRoam',\r\n  update: 'updateLayout'\r\n}, function (payload, ecModel) {\r\n  ecModel.eachComponent('amap', function (aMapModel) {\r\n    var amap = aMapModel.getAMap();\r\n    var center = amap.getCenter();\r\n    aMapModel.setCenterAndZoom([center.lng, center.lat], amap.getZoom());\r\n  });\r\n});\r\n\r\nmodule.exports = {\r\n  version: \"1.0.0-rc.6\"\r\n};\r\n\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// echarts-amap.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7c74ff067bc57990e890","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"echarts\"\n// module id = 0\n// module chunks = 0","var echarts = require('echarts');\r\n\r\nfunction AMapCoordSys(amap, api) {\r\n  this._amap = amap;\r\n  this.dimensions = ['lng', 'lat'];\r\n  this._mapOffset = [0, 0];\r\n\r\n  this._api = api;\r\n}\r\n\r\nAMapCoordSys.prototype.dimensions = ['lng', 'lat'];\r\n\r\nAMapCoordSys.prototype.setZoom = function (zoom) {\r\n  this._zoom = zoom;\r\n};\r\n\r\nAMapCoordSys.prototype.setCenter = function (center) {\r\n  this._center = this._amap.lnglatToPixel(center);//, 10)\r\n};\r\n\r\nAMapCoordSys.prototype.setMapOffset = function (mapOffset) {\r\n  this._mapOffset = mapOffset;\r\n};\r\n\r\nAMapCoordSys.prototype.getAMap = function () {\r\n  return this._amap;\r\n};\r\n\r\nAMapCoordSys.prototype.dataToPoint = function (data) {\r\n  var point = new AMap.LngLat(data[0], data[1]);\r\n  var px = this._amap.lngLatToContainer(point);//, this._zoom);\r\n  var mapOffset = this._mapOffset;\r\n  return [px.x - mapOffset[0], px.y - mapOffset[1]];\r\n};\r\n\r\nAMapCoordSys.prototype.pointToData = function (pt) {\r\n  var mapOffset = this._mapOffset;\r\n  var pt = this._amap.containerToLngLat({\r\n    x: pt[0] + mapOffset[0],\r\n    y: pt[1] + mapOffset[1]\r\n  });\r\n  return [pt.lng, pt.lat];\r\n};\r\n\r\nAMapCoordSys.prototype.getViewRect = function () {\r\n  var api = this._api;\r\n  return new echarts.graphic.BoundingRect(0, 0, api.getWidth(), api.getHeight());\r\n};\r\n\r\nAMapCoordSys.prototype.getRoamTransform = function () {\r\n  return echarts.matrix.create();\r\n};\r\n\r\nvar Overlay;\r\n\r\n// For deciding which dimensions to use when creating list data\r\nAMapCoordSys.dimensions = AMapCoordSys.prototype.dimensions;\r\n\r\nAMapCoordSys.create = function (ecModel, api) {\r\n  var amapCoordSys;\r\n  var root = api.getDom();\r\n\r\n  // TODO Dispose\r\n  ecModel.eachComponent('amap', function (amapModel) {\r\n    var viewportRoot = api.getZr().painter.getViewportRoot();\r\n    if (typeof AMap === 'undefined') {\r\n      throw new Error('AMap api is not loaded');\r\n    }\r\n\r\n    if (amapCoordSys) {\r\n      throw new Error('Only one amap component can exist');\r\n    }\r\n    if (!amapModel.__amap) {\r\n      // Not support IE8\r\n      var amapRoot = root.querySelector('.ec-extension-amap');\r\n      if (amapRoot) {\r\n          // Reset viewport left and top, which will be changed\r\n          // in moving handler in AMapView\r\n          viewportRoot.style.left = '0px';\r\n          viewportRoot.style.top = '0px';\r\n          root.removeChild(amapRoot);\r\n      }\r\n      amapRoot = document.createElement('div');\r\n      amapRoot.style.cssText = 'width:100%;height:100%';\r\n      // Not support IE8\r\n      amapRoot.classList.add('ec-extension-amap');\r\n      root.appendChild(amapRoot);\r\n\r\n      var options = amapModel.get() || {};\r\n      options = amapModel.__options = echarts.util.clone(options);\r\n      var amap = amapModel.__amap = new AMap.Map(amapRoot, options);\r\n\r\n      var layer = amapModel.__layer = new AMap.CustomLayer(viewportRoot);\r\n      layer.setMap(amap);\r\n    }\r\n    var amap = amapModel.getAMap();\r\n    var layer = amapModel.getLayer();\r\n    layer.hide();\r\n\r\n    var zoom = amap.getZoom();\r\n    var center = amap.getCenter();\r\n\r\n    amapCoordSys = new AMapCoordSys(amap, api);\r\n    amapCoordSys.setMapOffset(amapModel.__mapOffset || [0, 0]);\r\n    amapCoordSys.setZoom(zoom);\r\n    amapCoordSys.setCenter([center.lng, center.lat]);\r\n\r\n    amapModel.coordinateSystem = amapCoordSys;\n    layer.show();\r\n  });\r\n\r\n  ecModel.eachSeries(function (seriesModel) {\r\n    if (seriesModel.get('coordinateSystem') === 'amap') {\r\n      seriesModel.coordinateSystem = amapCoordSys;\r\n    }\r\n  });\r\n};\r\n\r\nmodule.exports = AMapCoordSys;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AMapCoordSys.js\n// module id = 1\n// module chunks = 0","function v2Equal(a, b) {\r\n  return a && b && a[0] === b[0] && a[1] === b[1];\r\n}\r\n\r\nmodule.exports = require('echarts').extendComponentModel({\r\n  type: 'amap',\r\n\r\n  getAMap: function () {\r\n    // __amap is injected when creating AMapCoordSys\r\n    return this.__amap;\r\n  },\r\n\r\n  getLayer: function() {\r\n    // __layer is injected when creating AMapCoordSys\r\n    return this.__layer;\r\n  },\r\n\r\n  getMapOptions: function() {\r\n    return this.__options;\r\n  },\r\n\r\n  setCenterAndZoom: function (center, zoom) {\r\n    this.option.center = center;\r\n    this.option.zoom = zoom;\r\n  },\r\n\r\n  centerOrZoomChanged: function (center, zoom) {\r\n    var option = this.option;\r\n    return !(v2Equal(center, option.center) && zoom === option.zoom);\r\n  },\r\n\r\n  defaultOption: {\r\n    center: [116.397475,39.908695],\r\n    zoom: 4,\r\n  }\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AMapModel.js\n// module id = 2\n// module chunks = 0","/*\r\n * this function bollowed from:\r\n * https://github.com/Leaflet/Leaflet/blob/master/src/core/Util.js\r\n */\r\nfunction throttle(fn, time, context) {\r\n\tvar lock, args, wrapperFn, later;\r\n\r\n\tlater = function () {\r\n\t\t// reset lock and call if queued\r\n\t\tlock = false;\r\n\t\tif (args) {\r\n\t\t\twrapperFn.apply(context, args);\r\n\t\t\targs = false;\r\n\t\t}\r\n\t};\r\n\r\n\twrapperFn = function () {\r\n\t\tif (lock) {\r\n\t\t\t// called too soon, queue to call later\r\n\t\t\targs = arguments;\r\n\r\n\t\t} else {\r\n\t\t\t// call and lock until later\r\n\t\t\tfn.apply(context, arguments);\r\n\t\t\tsetTimeout(later, time);\r\n\t\t\tlock = true;\r\n\t\t}\r\n\t};\r\n\r\n\treturn wrapperFn;\r\n}\r\n\r\nvar echarts = require('echarts');\r\n\r\nmodule.exports = require('echarts').extendComponentView({\r\n  type: 'amap',\r\n\r\n  render: function (aMapModel, ecModel, api) {\r\n    var rendering = true;\r\n\r\n    var amap = aMapModel.getAMap();\r\n    var viewportRoot = api.getZr().painter.getViewportRoot();\r\n    var coordSys = aMapModel.coordinateSystem;\r\n    var moveHandler = function (e) {\r\n      if (rendering) {\r\n          return;\r\n      }\r\n      var offsetEl = viewportRoot.parentNode.parentNode.parentNode;\r\n      var mapOffset = [\r\n          -parseInt(offsetEl.style.left, 10) || 0,\r\n          -parseInt(offsetEl.style.top, 10) || 0\r\n      ];\r\n      viewportRoot.style.left = mapOffset[0] + 'px';\r\n      viewportRoot.style.top = mapOffset[1] + 'px';\r\n\r\n      coordSys.setMapOffset(mapOffset);\r\n      aMapModel.__mapOffset = mapOffset;\r\n\r\n      api.dispatchAction({\r\n          type: 'amapRoam'\r\n      });\r\n    };\r\n\r\n    function zoomEndHandler() {\r\n      if (rendering) {\r\n          return;\r\n      }\r\n      api.dispatchAction({\r\n          type: 'amapRoam'\r\n      });\r\n    }\r\n\r\n    function resizeHandler(e) {\r\n      echarts.getInstanceByDom(api.getDom()).resize();\r\n      moveHandler.call(this, e)\r\n    }\r\n\r\n    var throttledResizeHandler = throttle(resizeHandler, 300, amap);\r\n\r\n    amap.off('movestart', this._oldMoveHandler);\r\n    amap.off('zoomend', this._oldZoomEndHandler);\r\n    amap.off('moveend', this._oldZoomEndHandler);\r\n    amap.off('complete', this._oldZoomEndHandler);\r\n    aMapModel.get('resizeEnable') && amap.off('resize', this._oldResizeHandler);\r\n\r\n    amap.on('movestart', moveHandler);\r\n    amap.on('zoomend', zoomEndHandler);\r\n    amap.on('moveend', zoomEndHandler);\r\n    amap.on('complete', zoomEndHandler);\r\n    aMapModel.get('resizeEnable') && amap.on('resize', throttledResizeHandler);\r\n\r\n    this._oldMoveHandler = moveHandler;\r\n    this._oldZoomEndHandler = zoomEndHandler;\r\n    this._oldResizeHandler = throttledResizeHandler;\r\n\r\n    // var roam = aMapModel.get('roam');\r\n    // if (roam && roam !== 'scale') {\r\n    //     amap.enableDragging();\r\n    // }\r\n    // else {\r\n    //     amap.disableDragging();\r\n    // }\r\n    // if (roam && roam !== 'move') {\r\n    //     amap.enableScrollWheelZoom();\r\n    //     amap.enableDoubleClickZoom();\r\n    //     amap.enablePinchToZoom();\r\n    // }\r\n    // else {\r\n    //     amap.disableScrollWheelZoom();\r\n    //     amap.disableDoubleClickZoom();\r\n    //     amap.disablePinchToZoom();\r\n    // }\r\n\r\n    rendering = false;\r\n  }\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/AMapView.js\n// module id = 3\n// module chunks = 0","/**\r\n * BMap component extension\r\n */\r\nrequire('echarts').registerCoordinateSystem(\r\n  'amap', require('./AMapCoordSys')\r\n);\r\nrequire('./AMapModel');\r\nrequire('./AMapView');\r\n\r\n// Action\r\nrequire('echarts').registerAction({\r\n  type: 'amapRoam',\r\n  event: 'amapRoam',\r\n  update: 'updateLayout'\r\n}, function (payload, ecModel) {\r\n  ecModel.eachComponent('amap', function (aMapModel) {\r\n    var amap = aMapModel.getAMap();\r\n    var center = amap.getCenter();\r\n    aMapModel.setCenterAndZoom([center.lng, center.lat], amap.getZoom());\r\n  });\r\n});\r\n\r\nmodule.exports = {\r\n  version: process.env.VERSION\r\n};\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/amap.js\n// module id = 4\n// module chunks = 0"]},"metadata":{},"sourceType":"script"}